<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10th Pro Quiz</title>
    <style>
        :root { --primary: #1a73e8; --success: #28a745; --danger: #dc3545; }
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; text-align: center; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        .timer { color: var(--danger); font-weight: bold; font-size: 20px; margin-bottom: 10px; }
        .sub-tag { background: #ff9800; color: white; padding: 5px 10px; border-radius: 5px; font-size: 14px; }
        .option { display: block; width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; text-align: left; }
        .correct { background: var(--success) !important; color: white; }
        .wrong { background: var(--danger) !important; color: white; }
    </style>
</head>
<body>
    <div class="card">
        <div id="start-page">
            <h1>üéì 10th ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h1>
            <p>‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç (30 ‡§™‡•ç‡§∞‡§∂‡•ç‡§® | 60 ‡§Æ‡§ø‡§®‡§ü)</p>
            <div id="subjects"></div>
        </div>
        <div id="quiz-page" style="display:none;">
            <div class="timer">‚è≥ <span id="time">60:00</span></div>
            <span id="sub-name" class="sub-tag">‡§µ‡§ø‡§∑‡§Ø</span>
            <h2 id="question">‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</h2>
            <div id="options"></div>
        </div>
        <div id="result-page" style="display:none;">
            <h1>üìä ‡§Ü‡§™‡§ï‡§æ ‡§∞‡§ø‡§ú‡§≤‡•ç‡§ü</h1>
            <h2 id="final-score">‡§∏‡•ç‡§ï‡•ã‡§∞: 0/100</h2>
            <p id="accuracy">‡§è‡§ï‡•ç‡§Ø‡•Ç‡§∞‡•á‡§∏‡•Ä: 0%</p>
            <button onclick="location.reload()" style="padding:10px; background:var(--primary); color:white; border:none; border-radius:5px;">‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§¶‡•á‡§Ç</button>
        </div>
    </div>

    <script>
        let allQ = [], quizQ = [], idx = 0, score = 0, timer;
        async function load() {
            const res = await fetch('questions.json?' + Date.now());
            allQ = await res.json();
            [...new Set(allQ.map(q => q.subject))].forEach(s => {
                const btn = document.createElement('button');
                btn.innerText = s;
                btn.onclick = () => start(s);
                btn.style.margin = "5px"; btn.style.padding = "10px";
                document.getElementById('subjects').appendChild(btn);
            });
        }
        function start(sub) {
            quizQ = allQ.filter(q => q.subject === sub).sort(() => 0.5 - Math.random()).slice(0, 30);
            document.getElementById('start-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'block';
            let t = 3600;
            timer = setInterval(() => {
                t--; document.getElementById('time').innerText = Math.floor(t/60) + ":" + (t%60).toString().padStart(2,'0');
                if(t <= 0) end();
            }, 1000);
            show();
        }
        function show() {
            if(idx >= quizQ.length) return end();
            let q = quizQ[idx];
            document.getElementById('sub-name').innerText = q.subject;
            document.getElementById('question').innerText = q.question;
            const optCont = document.getElementById('options');
            optCont.innerHTML = '';
            q.options.forEach(o => {
                const b = document.createElement('button');
                b.className = 'option'; b.innerText = o;
                b.onclick = () => {
                    if(o === q.answer) { b.classList.add('correct'); score++; }
                    else b.classList.add('wrong');
                    setTimeout(() => { idx++; show(); }, 1000);
                };
                optCont.appendChild(b);
            });
        }
        function end() {
            clearInterval(timer);
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('result-page').style.display = 'block';
            let res = Math.round((score/quizQ.length)*100);
            document.getElementById('final-score').innerText = `‡§∏‡•ç‡§ï‡•ã‡§∞: ${res}/100`;
            document.getElementById('accuracy').innerText = `‡§è‡§ï‡•ç‡§Ø‡•Ç‡§∞‡•á‡§∏‡•Ä: ${res}%`;
        }
        window.onload = load;
    </script>
</body>
</html>
