    // --- Shuffle Algorithm (प्रश्नों और विकल्पों को मिलाने के लिए) ---
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function initQuiz(subject) {
        document.getElementById('dashboard').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        
        // 1. 500 प्रश्नों में से रैंडम 15 सवाल उठाना
        let allQuestions = [...dummyData]; // यहाँ आपका 500 सवालों का डेटा होगा
        currentQuestions = shuffle(allQuestions).slice(0, 15); 
        
        qIdx = 0;
        correctCount = 0;
        wrongCount = 0;
        renderQuestion();
        startTimer(15 * 60); // 15 मिनट का टाइमर
    }

    function renderQuestion() {
        if (qIdx >= currentQuestions.length) {
            alert(`क्विज़ समाप्त! आपका स्कोर: ${correctCount}/15`);
            location.reload();
            return;
        }

        const qData = currentQuestions[qIdx];
        document.getElementById('question-text').innerText = qData.q;
        const list = document.getElementById('options-list');
        list.innerHTML = "";

        // 2. उत्तरों (Options) की शफलिंग करना
        // हम विकल्पों को उनके सही इंडेक्स के साथ मैप करेंगे ताकि सही जवाब पता रहे
        let optionsWithIndex = qData.options.map((opt, i) => ({ text: opt, originalIndex: i }));
        shuffle(optionsWithIndex); 

        optionsWithIndex.forEach((optObj) => {
            const btn = document.createElement('button');
            btn.className = "btn option-btn";
            btn.innerText = optObj.text;
            
            // चेक करें कि क्या यह ओरिजिनल सही जवाब है
            const isCorrect = (optObj.originalIndex === qData.correct);
            
            btn.onclick = () => checkAns(btn, isCorrect);
            list.appendChild(btn);
        });
    }

    function checkAns(selectedBtn, isCorrect) {
        const btns = document.querySelectorAll('.option-btn');
        btns.forEach(b => b.disabled = true);

        if (isCorrect) {
            selectedBtn.classList.add('correct'); // सही पर हरा
            correctCount++;
        } else {
            selectedBtn.classList.add('wrong'); // गलत पर लाल
            // सही जवाब को ढूंढकर हरा करना
            btns.forEach(b => {
                // यहाँ हम लॉजिकली सही बटन को हरा करेंगे
            });
            wrongCount++;
        }

        document.getElementById('score-display').innerText = `सही: ${correctCount} | गलत: ${wrongCount}`;

        // 0.5 सेकंड में अगला सवाल
        setTimeout(() => {
            qIdx++;
            renderQuestion();
        }, 500);
    }
