import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

// ... बाकी का Config वही रहेगा ...

const auth = getAuth();
const provider = new GoogleAuthProvider();

// यह सेटिंग लॉगिन को और भी स्थिर बनाएगी
setPersistence(auth, browserLocalPersistence);

document.getElementById('login-btn').onclick = async () => {
    try {
        // लॉगिन से पहले पुरानी मेमोरी साफ़ करना
        await auth.signOut();
        await signInWithPopup(auth, provider);
    } catch (e) {
        alert("सेटिंग एरर: कृपया Google Cloud में अपना डोमेन Save करें।");
    }
};
